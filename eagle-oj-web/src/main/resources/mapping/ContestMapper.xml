<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="contest">
        <insert id="addContest" parameterType="ContestEntity" useGeneratedKeys="true" keyProperty="cid">
            INSERT INTO `contest`(`name`,`owner`,`slogan`,`description`,`start_time`,
            `end_time`,`total_time`,`password`,`official`,`type`,`status`,`create_time`)
            VALUES (#{name},#{owner},#{slogan},#{description},#{startTime},
            #{endTime},#{totalTime},#{password},#{official},#{type},#{status},#{createTime})
        </insert>


        <select id="getAll" resultMap="contestMap">
            SELECT * FROM `contest`
        </select>

        <update id="updateContestByCid" parameterType="ContestEntity">
            UPDATE `contest` SET `name` = #{name},`owner`=#{owner},
                `slogan` = #{slogan},`description` = #{description},`start_time` = #{startTime},
                `end_time` = #{endTime},`total_time` = #{totalTime},`password` = #{password},`official`=#{official},
                `type` = #{type},`status`=#{status},`create_time` = #{createTime} WHERE `cid` = #{cid}
        </update>

        <delete id="deleteContestByCid">
            DELETE FROM `contest` WHERE `cid` = #{cid}
        </delete>

        <select id="getContestByCid" resultMap="contestMap">
            SELECT * FROM `contest` WHERE `cid` = #{cid}
        </select>
        <resultMap id="contestMap" type="ContestEntity">
            <id column="cid" property="cid"/>
            <result column="name" property="name"/>
            <result column="owner" property="owner"/>
            <result column="moderator" property="moderator"/>
            <result column="slogan" property="slogan"/>
            <result column="description" property="description"/>
            <result column="start_time" property="startTime"/>
            <result column="end_time" property="endTime"/>
            <result column="total_time" property="totalTime"/>
            <result column="password" property="password"/>
            <result column="official" property="official"/>
            <result column="type" property="type"/>
            <result column="create_time" property="createTime"/>
        </resultMap>
</mapper>